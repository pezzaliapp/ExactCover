<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ExactCover â€” Pentomino PWA (v11)</title>
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" href="icons/favicon.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="appbar">
    <div class="brand">
      <img src="icons/icon-192.png" alt="ExactCover icon" />
      <h1>ExactCover â€” Pentomino</h1>
      <span class="ver">v11</span>
    </div>
    <div class="actions">
      <button id="installBtn" class="ghost" hidden>Installa</button>
    </div>
  </header>

  <main>
    <section class="panel">
      <div class="controls">
        <label>Preset:</label>
        <select id="preset">
          <option value="6x10" selected>6 Ã— 10</option>
          <option value="5x12">5 Ã— 12</option>
          <option value="4x15">4 Ã— 15</option>
          <option value="3x20">3 Ã— 20</option>
          <option value="8x8h">8 Ã— 8 con 4 fori</option>
          <option value="custom">Customâ€¦</option>
        </select>
        <label for="w">Larghezza</label>
        <input id="w" type="number" min="3" max="20" value="10" />
        <label for="h">Altezza</label>
        <input id="h" type="number" min="3" max="20" value="6" />
        <button id="newBtn">Nuova Griglia</button>
        <button id="holesBtn" class="ghost">Modifica Fori</button>
        <button id="resetHolesBtn" class="ghost">Svuota Fori</button>
      </div>

      <div class="controls">
        <button id="checkBtn">Controlla</button>
<!-- <button id="suggestBtn">Suggerisci</button> -->
<!-- <button id="solveOneBtn">Risolvi (1)</button> -->
<button id="findAllBtn" class="ghost">Trova tutte (max 50)</button>
        <button id="prevBtn" class="ghost" disabled>â—€ï¸Ž</button>
        <button id="nextBtn" class="ghost" disabled>â–¶ï¸Ž</button>
        <button id="applyBtn" class="ghost" disabled>Applica</button>
        <button id="shuffleBtn" class="ghost">Mescola</button>
      </div>

      <p id="status" class="status">Pronto.</p>

      <div class="board-wrap">
        <div id="board" class="board" role="grid" aria-label="Griglia Pentomino"></div>
        <div id="overlay" class="overlay" aria-hidden="true"></div>
      </div>

      <div id="gallery" class="gallery"></div>

      <div class="legend">
        <span class="legend-item"><span class="cell demo hole"></span> Foro</span>
        <span class="legend-item"><span class="cell demo piece"></span> Pezzo</span>
        <span class="legend-item"><span class="cell demo preview"></span> Anteprima valida</span>
        <span class="legend-item"><span class="cell demo preview bad"></span> Anteprima non valida</span>
      </div>

      <div class="manual panel2">
        <h3>ModalitÃ  Manuale â€” Drag & Drop</h3>
        <div class="controls">
          <label for="pieceSelect">Pezzo:</label>
          <select id="pieceSelect"></select>
          <button id="rotBtn" class="ghost" title="Ruota">Ruota â†»</button>
          <button id="flipBtn" class="ghost" title="Specchia">Specchia â‡‹</button>
          <button id="removeBtn" class="ghost">Rimuovi pezzo</button>
          <button id="clearPlacedBtn" class="ghost">Svuota posizionati</button>
        </div>
        <div id="palette" class="palette"></div>
        <small class="muted">Trascina un pezzo sulla griglia per posizionarlo. Trascina dalla griglia per spostarlo. Premi <b>R</b> per ruotare e <b>F</b> per specchiare durante il drag.</small>
      </div>
    </section>

    <section class="side">
      <div class="stats">
        <p><strong>Dimensioni:</strong> <span id="statSize">6Ã—10</span></p>
        <p><strong>Celle valide:</strong> <span id="statCells">60</span></p>
        <p><strong>Pezzi attivi:</strong> <span id="statPieces">12</span> / 12</p>
        <p><strong>Copertura:</strong> <span id="statCover">0/60</span></p>
        <p><strong>Soluzioni:</strong> <span id="statSolutions">0</span> <small id="statCapped" class="muted"></small></p>
      </div>

      <details open>
        <summary>Pezzi attivi</summary>
        <div id="piecesPanel" class="pieces"></div>
        <small class="muted">Area richiesta = 5 Ã— (#pezzi attivi). Le celle valide devono coincidere.</small>
      </details>

      <details>
        <summary>Info</summary>
        <p>Obiettivo: coprire tutte le celle valide usando ciascun pentomino una sola volta, senza sovrapposizioni. Solver: <em>Dancing Links</em> (DLX).</p>
        <p>MIT Â© 2025 Alessandro Pezzali â€” PezzaliAPP</p>
      </details>
    </section>
  </main>

  <footer class="footer">
    <p>ðŸ’š Open Source â€” PezzaliAPP.com</p>
  </footer>

  <script src="script.js" defer></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js');
      });
    }
  </script>
</body>
</html>
