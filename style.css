
:root{
  --bg:#0f172a; --panel:#111827; --ink:#e5e7eb; --muted:#9ca3af;
  --accent:#22c55e; --warn:#ef4444; --line:#1f2937;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0}
body{background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial}
.appbar{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;border-bottom:1px solid var(--line);background:var(--panel);position:sticky;top:0;z-index:2}
.brand{display:flex;gap:.75rem;align-items:center}
.brand img{width:32px;height:32px;border-radius:6px}
.brand h1{font-size:1.15rem;margin:0;letter-spacing:.5px}
.actions{display:flex;gap:.5rem}
button,.ghost{background:var(--accent);border:none;border-radius:.6rem;color:#06210f;padding:.5rem .8rem;font-weight:700;cursor:pointer}
button.ghost,.ghost{background:transparent;color:var(--ink);border:1px solid var(--line)}
button:disabled{opacity:.5;cursor:not-allowed}
main{display:grid;grid-template-columns:1fr 360px;gap:1rem;max-width:1200px;margin:1rem auto;padding:0 1rem}
.panel,.side{background:var(--panel);border:1px solid var(--line);border-radius:1rem;padding:1rem}
.panel2{margin-top:1rem;background:#0d1425;border-radius:.8rem;border:1px dashed var(--line)}
.controls{display:flex;flex-wrap:wrap;gap:.5rem;margin:.5rem 0}
.controls label{align-self:center}
input[type="number"], select{background:#0b1220;color:var(--ink);border:1px solid var(--line);border-radius:.5rem;padding:.4rem .5rem}
input[type="number"]{width:5rem}
.status{margin:.5rem 0 1rem;color:var(--muted)}

.board{--w:10;--h:6;display:grid;grid-template-columns:repeat(var(--w),1fr);gap:2px;background:var(--line);border-radius:.5rem;overflow:hidden;border:1px solid var(--line);min-height:200px}
.cell{aspect-ratio:1/1;background:#0b1220;display:flex;align-items:center;justify-content:center;font-size:13px;user-select:none}
.cell.dark{background:#0b1628}
.cell.hole{background:#1b0f0f}
.cell.piece{outline:2px solid rgba(255,255,255,.14);outline-offset:-2px}

.legend{display:flex;gap:1rem;margin-top:.75rem}
.legend-item{display:flex;gap:.35rem;align-items:center}
.cell.demo{width:20px;height:20px;aspect-ratio:auto;border-radius:4px}
.cell.demo.hole{background:#1b0f0f}
.cell.demo.piece{background:#0b1220;outline:2px solid rgba(255,255,255,.14);outline-offset:-2px}

.pieces{display:grid;grid-template-columns:repeat(6,1fr);gap:.35rem;margin-top:.5rem}
.piece-toggle{display:flex;gap:.35rem;align-items:center;background:#0b1220;border:1px solid var(--line);border-radius:.5rem;padding:.25rem .5rem;cursor:pointer;user-select:none}
.piece-toggle input{accent-color:#22c55e}

.palette{display:grid;grid-template-columns:repeat(6,1fr);gap:.5rem;margin:.5rem 0}
.tile{background:#0b1220;border:1px solid var(--line);border-radius:.6rem;padding:.4rem;cursor:grab;user-select:none;position:relative}
.tile .mini{display:grid;grid-template-columns:repeat(5,12px);grid-auto-rows:12px;gap:2px;justify-content:center;margin:.25rem auto}
.tile .cell{background:#1b273b}
.tile .cell.on{background:#1e90ff}
.tile .ctrls{position:absolute;top:6px;right:6px;display:flex;gap:4px}
.tile .ctrls button{background:transparent;color:var(--ink);border:1px solid var(--line);border-radius:.35rem;padding:0 .3rem;font-size:.75rem;cursor:pointer}
.tile .ctrls button:hover{background:#0b1628}

.footer{max-width:1200px;margin:1rem auto;padding:0 1rem;color:var(--muted)}
@media (max-width: 960px){main{grid-template-columns:1fr}}


/* === Mobile responsiveness patch === */
.board{width:100%;max-width:calc(100vw - 2rem);touch-action:none}
.controls{gap:.4rem;flex-wrap:wrap}
@media (max-width: 720px){
  main{grid-template-columns:1fr;gap:.75rem;padding:0 .5rem}
  .panel,.side{padding:.75rem}
  .board{max-width:calc(100vw - 1rem)}
  .palette{grid-template-columns:repeat(auto-fit, minmax(72px,1fr));gap:.4rem}
  .tile .mini{grid-template-columns:repeat(5,14px);grid-auto-rows:14px;gap:3px}
  .tile{padding:.5rem}
  .controls button,.controls select,.controls input{font-size:.95rem}
}
/* Stronger outline for placed pieces on dark screens */
.cell.piece{outline:2.5px solid rgba(255,255,255,.22)}


/* Preview overlays (pointer DnD) */
.cell.preview::after{content:"";position:absolute;inset:0;background:rgba(34,197,94,.38)}
.cell.preview.bad::after{background:rgba(239,68,68,.48)}


/* Mobile DnD reliability */
#palette .tile{ touch-action:none; -webkit-user-drag:none; user-select:none; }
#palette{ touch-action:pan-y; } /* allow vertical scroll outside tiles */
.board{ touch-action:none; }



/* iOS long-press fix: prevent text selection/callout on interactive areas */
.board, #palette, #palette .tile, .cell, .panel, .controls {
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

